import{u as A,a as E,r as L,s as M,b as z,j as s,C as d,c as x,d as h,e as u,A as j,f as B,B as R,L as f}from"./index-BfZ5KBQI.js";import{u as T,B as v}from"./useAsync-CdrnrLkJ.js";import{E as K}from"./ErrorState-CpDg7nxZ.js";import{fetchStreakOnly as O}from"./stats-CK7kMDFG.js";import{D as q}from"./PageSkeletons-D1zAlwxf.js";import{P as G}from"./PageContainer-Rz-u_6WB.js";import{C as w,T as H}from"./target-C6opFIO2.js";import{T as k}from"./trending-up-BLEkHZQL.js";function I(){var g,N;const{data:C}=A(),{weeklyProgress:r,workoutsByDay:c,todaysWorkout:a}=C,{user:i}=E(),[o,S]=L.useState({days:0,best:0}),{loading:p,error:l,run:$}=T(async()=>{if(!i)return;const n=await O(M,i.id);S(n)},{deps:[i==null?void 0:i.id]}),{t:e}=z(),b=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],D=new Date,m=(()=>{const n=D.getDay()-1;return b[n]?b[n]:"monday"})(),t=(c==null?void 0:c[m])||a;return p?s.jsx(q,{}):l?s.jsx(K,{title:e("common.error","Error"),message:String((l==null?void 0:l.message)||l),retryLabel:e("common.retry","Retry"),onRetry:$}):s.jsxs(G,{busy:p,title:e("navigation.dashboard"),className:"space-y-8 min-w-0 overflow-x-hidden stagger-children",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight font-space-grotesk",children:e("navigation.dashboard")}),s.jsx("p",{className:"text-muted-foreground",children:e("dashboard.subtitle")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 stagger-children",children:[s.jsxs(d,{variant:"muted",children:[s.jsx(x,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(w,{className:"h-5 w-5 text-primary"}),s.jsx(h,{size:"lg",children:e("dashboard.dayStreak")})]})}),s.jsx(u,{children:s.jsxs("div",{className:"flex items-end justify-between gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-5xl font-bold leading-none text-primary","aria-label":`${o.days} ${e("dashboard.days")}`,children:o.days}),s.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:e("dashboard.days")})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:e("dashboard.best")}),s.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[s.jsx("span",{className:"text-2xl font-semibold",children:o.best}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e("dashboard.days")})]}),s.jsx(v,{variant:"secondary",className:"mt-2",children:e("dashboard.dayStreak")})]})]})})]}),s.jsxs(d,{variant:"highlight",className:"group",children:[s.jsxs(x,{className:"pb-2",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(j,{className:"h-5 w-5 text-primary"}),s.jsxs(h,{size:"lg",className:"flex items-center gap-2",children:[e("dashboard.todaysWorkout"),s.jsx(v,{variant:"outline",className:"text-xs font-normal px-2 py-0.5",children:e(`workouts.days.${m}`)})]})]})}),s.jsx(B,{children:e("dashboard.adaptedWorkout")})]}),s.jsxs(u,{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg text-primary",children:e(`workouts.${m}.name`,(t==null?void 0:t.name)||(a==null?void 0:a.name))}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(w,{className:"h-4 w-4"}),s.jsxs("span",{children:[(t==null?void 0:t.duration)??(a==null?void 0:a.duration)," ",e("dashboard.min")]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(j,{className:"h-4 w-4"}),s.jsxs("span",{children:[(((g=t==null?void 0:t.exercises)==null?void 0:g.length)??((N=a==null?void 0:a.exercises)==null?void 0:N.length))||0," ",e("dashboard.exercises")]})]})]}),s.jsx(R,{className:"w-full btn-primary-premium",asChild:!0,children:s.jsx(f,{to:"/workouts","aria-label":e("dashboard.startWorkout"),children:e("dashboard.startWorkout")})})]})]})]}),s.jsxs(d,{variant:"subtle",children:[s.jsx(x,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(k,{className:"h-6 w-6 text-primary"}),s.jsx(h,{size:"xl",children:e("dashboard.weeklyProgress")})]})})}),s.jsx(u,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium mb-1",children:e("dashboard.totalMinutes")}),s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[Math.floor(r.totalMinutes/60),e("dashboard.hourShort")," ",r.totalMinutes%60,e("dashboard.minuteShort")]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-between text-sm",children:s.jsx("span",{className:"font-medium",children:e("dashboard.workouts")})}),s.jsxs("div",{className:"flex items-end gap-2 mt-2 h-8",role:"img","aria-label":`${e("dashboard.workouts")}: ${r.workoutsCompleted}/${r.workoutsTarget}`,children:[s.jsxs("span",{className:"sr-only",children:[e("dashboard.workouts"),": ",r.workoutsCompleted,"/",r.workoutsTarget]}),Array.from({length:r.workoutsTarget}).map((n,y)=>s.jsx("div",{"aria-hidden":"true",className:`w-3 rounded-md transition-all duration-200 ${y<r.workoutsCompleted?"bg-primary h-8":"bg-muted-foreground/20 h-4"}`},y))]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 stagger-children",children:[s.jsx(d,{variant:"subtle",className:"h-20 flex flex-col items-center justify-center",children:s.jsxs(f,{to:"/profile",className:"flex flex-col items-center justify-center h-full w-full",children:[s.jsx(H,{className:"h-6 w-6 mb-2 text-primary"}),s.jsx("span",{className:"text-sm",children:e("dashboard.updateGoals")})]})}),s.jsx(d,{variant:"subtle",className:"h-20 flex flex-col items-center justify-center",children:s.jsxs(f,{to:"/progress",className:"flex flex-col items-center justify-center h-full w-full",children:[s.jsx(k,{className:"h-6 w-6 mb-2 text-primary"}),s.jsx("span",{className:"text-sm",children:e("dashboard.viewStats")})]})}),s.jsx(d,{variant:"subtle",className:"h-20 flex flex-col items-center justify-center opacity-50 cursor-not-allowed",children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[s.jsx(j,{className:"h-6 w-6 mb-2 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e("dashboard.quickStretch")})]})})]})]})}const Z=()=>s.jsx(I,{});export{Z as default};
