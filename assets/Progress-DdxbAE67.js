import{g as T,b as $,a as P,r as x,s as B,j as e,S as n,C as l,e as i,c as d,d as c,A as g,f as h}from"./index-BfZ5KBQI.js";import{u as z,B as p}from"./useAsync-CdrnrLkJ.js";import{P as D}from"./progress-CH9e0ym1.js";import{E as A}from"./ErrorState-CpDg7nxZ.js";import{fetchProgressData as E}from"./stats-CK7kMDFG.js";import{P as L}from"./PageContainer-Rz-u_6WB.js";import{F as W}from"./flame-C2ngVGDc.js";import{C as G,T as R}from"./target-C6opFIO2.js";import{T as j}from"./trending-up-BLEkHZQL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=T("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Q=()=>{const{t:s}=$(),{user:o}=P(),[r,N]=x.useState({workoutsCompleted:0,workoutsTarget:7,totalMinutes:0,currentStreak:0,longestStreak:0}),[f,w]=x.useState([]),[v,y]=x.useState([]),[b,k]=x.useState([]),{loading:u,error:m,run:C}=z(async()=>{if(!o)return;const{weekly:a,monthly:t,achievements:S,personalBests:M}=await E(B,o.id,7);N(a),w(t),y(S),k(M)},{deps:[o==null?void 0:o.id]});return u?e.jsxs("div",{className:"space-y-8 min-w-0 pr-4 xl:pr-8 overflow-x-hidden stagger-children","aria-busy":"true",children:[e.jsxs("div",{children:[e.jsx(n,{className:"h-8 w-48"}),e.jsx(n,{className:"h-4 w-72 mt-2"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((a,t)=>e.jsx(l,{className:"border-border/50 w-full overflow-hidden",children:e.jsxs(i,{className:"p-6 space-y-3",children:[e.jsx(n,{className:"h-6 w-40"}),e.jsx(n,{className:"h-4 w-24"})]})},t))}),e.jsxs(l,{className:"border-border/50 w-full overflow-hidden",children:[e.jsxs(d,{className:"space-y-2",children:[e.jsx(n,{className:"h-6 w-56"}),e.jsx(n,{className:"h-4 w-80"})]}),e.jsx(i,{children:e.jsx(n,{className:"h-3 w-full"})})]})]}):m?e.jsx(A,{title:s("common.error","Error"),message:String((m==null?void 0:m.message)||m),retryLabel:s("common.retry","Retry"),onRetry:C}):e.jsxs(L,{busy:u,title:s("progress.title"),className:"space-y-8 min-w-0 overflow-x-hidden stagger-children",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-space-grotesk",children:s("progress.title")}),e.jsx("p",{className:"text-muted-foreground",children:s("progress.subtitle")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 min-w-0 stagger-children",children:[e.jsxs(l,{variant:"muted",children:[e.jsx(d,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),e.jsx(c,{size:"sm",children:s("progress.dayStreak")})]})}),e.jsx(i,{className:"pt-0",children:e.jsxs("div",{className:"flex items-end justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold leading-none text-primary","aria-label":`${r.currentStreak} ${s("dashboard.days","days")}`,children:r.currentStreak}),e.jsx("div",{className:"mt-1 text-xs text-muted-foreground uppercase tracking-wide flex items-center gap-1",children:e.jsx("span",{children:s("dashboard.days","days")})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:s("dashboard.bestStreak","Best streak")}),e.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[e.jsx("span",{className:"text-xl font-semibold",children:r.longestStreak}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("dashboard.days","days")})]}),e.jsx(p,{variant:"secondary",className:"mt-2 whitespace-nowrap",children:s("dashboard.dayStreak","Day Streak")})]})]})})]}),e.jsxs(l,{variant:"subtle",children:[e.jsx(d,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),e.jsx(c,{size:"sm",children:s("progress.workoutsThisWeek")})]})}),e.jsx(i,{className:"pt-0",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold leading-none text-primary","aria-label":`${r.workoutsCompleted} ${s("dashboard.workouts","Workouts")}`,children:r.workoutsCompleted}),e.jsx("div",{className:"mt-1 text-xs text-muted-foreground uppercase tracking-wide",children:s("dashboard.workouts","Workouts")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:s("progress.weeklyGoals")}),e.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[e.jsx("span",{className:"text-lg font-semibold",children:r.workoutsCompleted}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",r.workoutsTarget]})]}),e.jsxs(p,{variant:"outline",className:"mt-2",children:[Math.min(100,Math.round(r.workoutsCompleted/(r.workoutsTarget||1)*100)),"%"]})]})]})})]}),e.jsxs(l,{variant:"subtle",children:[e.jsx(d,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),e.jsx(c,{size:"sm",children:s("progress.totalThisWeek")})]})}),e.jsx(i,{className:"pt-0",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-4xl font-bold leading-none text-primary","aria-label":`${r.totalMinutes} minutes`,children:[Math.floor(r.totalMinutes/60),"h ",r.totalMinutes%60,"m"]}),e.jsx("div",{className:"mt-1 text-xs text-muted-foreground uppercase tracking-wide",children:s("dashboard.totalMinutes","Total Minutes")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:s("progress.weeklyGoals")}),e.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[e.jsx("span",{className:"text-lg font-semibold",children:r.totalMinutes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("dashboard.minuteShort","m")})]}),e.jsxs(p,{variant:"outline",className:"mt-2",children:[r.workoutsCompleted>0?Math.round(r.totalMinutes/r.workoutsCompleted):0,"m avg"]})]})]})})]})]}),e.jsxs(l,{variant:"subtle",className:"min-w-0 w-full overflow-hidden",children:[e.jsxs(d,{children:[e.jsxs(c,{size:"lg",className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:s("progress.weeklyGoals")})]}),e.jsx(h,{children:s("progress.weeklyGoalsDescription")})]}),e.jsx(i,{className:"space-y-6 min-w-0",children:e.jsx("div",{className:"grid grid-cols-1 gap-6 stagger-children",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:s("progress.workouts")}),e.jsxs("span",{className:"text-muted-foreground",children:[r.workoutsCompleted,"/",r.workoutsTarget]})]}),e.jsx(D,{value:r.workoutsTarget?r.workoutsCompleted/r.workoutsTarget*100:0,className:"h-3"})]})})})]}),e.jsxs(l,{variant:"subtle",className:"min-w-0 w-full overflow-hidden",children:[e.jsxs(d,{children:[e.jsxs(c,{size:"lg",className:"flex items-center space-x-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:s("progress.personalBests")})]}),e.jsx(h,{children:s("progress.personalBestsDescription")})]}),e.jsx(i,{className:"min-w-0",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 min-w-0 stagger-children",children:b.map((a,t)=>e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg min-w-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s(`progress.best.${t}.metric`,a.metric)}),e.jsx("p",{className:"text-2xl font-bold",children:a.value}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(j,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:s(`progress.best.${t}.improvement`,a.improvement)})]})]})},t))})})]}),e.jsxs(l,{variant:"subtle",className:"min-w-0 w-full overflow-hidden",children:[e.jsxs(d,{children:[e.jsxs(c,{size:"lg",className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:s("progress.monthlyOverview")})]}),e.jsx(h,{children:s("progress.monthlyOverviewDescription")})]}),e.jsx(i,{className:"min-w-0",children:e.jsx("div",{className:"space-y-4 min-w-0 stagger-children",children:f.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg w-full",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium",children:s(`progress.month.${t}.label`,{defaultValue:a.week})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("progress.month.minutesTotal",{count:a.minutes,defaultValue:`${a.minutes} minutes total`})})]}),e.jsx("div",{className:"flex items-center space-x-4 text-sm shrink-0",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(g,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:s("progress.month.workouts",{count:a.workouts,defaultValue:`${a.workouts} workouts`})})]})})]},t))})})]}),e.jsxs(l,{variant:"subtle",className:"w-full overflow-hidden",children:[e.jsxs(d,{children:[e.jsx(c,{size:"lg",children:s("progress.achievements")}),e.jsx(h,{children:s("progress.achievementsDescription")})]}),e.jsx(i,{className:"min-w-0",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 min-w-0 stagger-children",children:v.map((a,t)=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all min-w-0 ${a.earned?"border-primary/20 bg-primary/5":"border-muted bg-muted/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${a.earned?"text-primary":"text-muted-foreground"}`,children:s(`progress.achievementsList.${t}.title`,a.title)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s(`progress.achievementsList.${t}.description`,a.description)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:a.date})]}),e.jsx(p,{variant:a.earned?"default":"secondary",className:a.earned?"bg-primary":"",children:a.earned?s("progress.earned"):s("progress.locked")})]})},t))})})]})]})};export{Q as default};
