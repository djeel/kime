import{g as A,b as X,u as Z,r as d,j as e,B as p,h as te,i as ae,a as ie,s as z,C as E,c as M,d as R,f as _,e as W,I as re}from"./index-iOXzGFVc.js";import{u as oe,B as T}from"./useAsync-DH94AwA2.js";import{P as Q}from"./progress-cy3bVhww.js";import{E as ne}from"./ErrorState-CV5A9HrL.js";import{C as le,T as ce}from"./trash-2-D5Lj3B-0.js";import{W as de}from"./PageSkeletons-B1N6nasE.js";import{P as ue}from"./PageContainer-B4hCR2uv.js";import{T as K,C as G}from"./target-D7LytEqX.js";import{P as V}from"./pencil-1RFCJUh8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=A("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=A("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Y=({onClose:D,day:n})=>{const{t:s}=X(),{data:g,setData:S}=Z(),b=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];b.map(r=>({key:r,label:s(`workouts.days.${r}`)}));const i=g.workoutsByDay||{monday:{name:s("workouts.monday.name"),duration:25,exercises:[{name:s("exercise.pushUps.description"),reps:"10-15",modification:s("exercise.pushUps.modification"),tips:s("exercise.pushUps.tips")},{name:s("exercise.plankHold.description"),reps:"30s",modification:s("exercise.plankHold.modification"),tips:s("exercise.plankHold.tips")},{name:s("exercise.tricepDips.description"),reps:"10",modification:s("exercise.tricepDips.modification"),tips:s("exercise.tricepDips.tips")}]},tuesday:{name:s("workouts.tuesday.name"),duration:20,exercises:[{name:s("exercise.deadBug.description"),reps:"12",modification:s("exercise.deadBug.modification"),tips:s("exercise.deadBug.tips")},{name:s("exercise.sidePlank.description"),reps:"20s each side",modification:s("exercise.sidePlank.modification"),tips:s("exercise.sidePlank.tips")},{name:s("exercise.mountainClimbers.description"),reps:"20",modification:s("exercise.mountainClimbers.modification"),tips:s("exercise.mountainClimbers.tips")}]},wednesday:{name:s("workouts.wednesday.name"),duration:30,exercises:[{name:s("exercise.squats.description"),reps:"15",modification:s("exercise.squats.modification"),tips:s("exercise.squats.tips")},{name:s("exercise.reverseLunges.description"),reps:"10 each leg",modification:s("exercise.reverseLunges.modification"),tips:s("exercise.reverseLunges.tips")},{name:s("exercise.gluteBridge.description"),reps:"15",modification:s("exercise.gluteBridge.modification"),tips:s("exercise.gluteBridge.tips")}]},thursday:{name:s("workouts.thursday.name"),duration:15,exercises:[{name:s("exercise.catCow.description"),reps:"10",modification:s("exercise.catCow.modification"),tips:s("exercise.catCow.tips")},{name:s("exercise.worldsGreatestStretch.description"),reps:"6 each side",modification:s("exercise.worldsGreatestStretch.modification"),tips:s("exercise.worldsGreatestStretch.tips")},{name:s("exercise.childsPose.description"),reps:"30s",modification:s("exercise.childsPose.modification"),tips:s("exercise.childsPose.tips")}]},friday:{name:s("workouts.friday.name"),duration:25,exercises:[{name:s("exercise.jumpingJacks.description"),reps:"30",modification:s("exercise.jumpingJacks.modification"),tips:s("exercise.jumpingJacks.tips")},{name:s("exercise.pushUps.description"),reps:"10",modification:s("exercise.pushUps.modification"),tips:s("exercise.pushUps.tips")},{name:s("exercise.squats.description"),reps:"15",modification:s("exercise.squats.modification"),tips:s("exercise.squats.tips")}]},saturday:{name:s("workouts.saturday.name"),duration:20,exercises:[{name:s("exercise.walking.description"),reps:"10 min",modification:s("exercise.walking.modification"),tips:s("exercise.walking.tips")},{name:s("exercise.standingQuadStretch.description"),reps:"30s each leg",modification:s("exercise.standingQuadStretch.modification"),tips:s("exercise.standingQuadStretch.tips")},{name:s("exercise.neckRolls.description"),reps:"10",modification:s("exercise.neckRolls.modification"),tips:s("exercise.neckRolls.tips")}]},sunday:{name:s("workouts.sunday.name"),duration:10,exercises:[{name:s("exercise.breathingPractice.description"),reps:"5 min",modification:s("exercise.breathingPractice.modification"),tips:s("exercise.breathingPractice.tips")},{name:s("exercise.bodyScan.description"),reps:"5 min",modification:s("exercise.bodyScan.modification"),tips:s("exercise.bodyScan.tips")}]}},[u,y]=d.useState(()=>{var r;return n?[{key:n,...i[n],exercises:(((r=i[n])==null?void 0:r.exercises)||[]).map(t=>({...t}))}]:b.map(t=>{var a;return{key:t,...i[t],exercises:(((a=i[t])==null?void 0:a.exercises)||[]).map(l=>({...l}))}})}),P=(r,t)=>{if(n)return;const a=[...u];t==="up"&&r>0&&([a[r-1],a[r]]=[a[r],a[r-1]]),t==="down"&&r<a.length-1&&([a[r],a[r+1]]=[a[r+1],a[r]]),y(a)},L=r=>{const t=[...u],a=t[r].exercises[t[r].exercises.length-1];a&&!a.name&&!a.reps&&!a.modification&&!a.tips||(t[r].exercises.push({name:"",reps:"",modification:"",tips:""}),y(t))},$=(r,t)=>{const a=[...u];a[r].exercises.splice(t,1),y(a)},x=(r,t,a,l)=>{const c=[...u];c[r].exercises[t][a]=l,y(c)},k=(r,t,a)=>{const l=[...u];t==="duration"?l[r][t]=a===""?"":Number(a):l[r][t]=a,y(l)},N=()=>{if(n){const t=u[0];S({...g,workoutsByDay:{...g.workoutsByDay,[n]:{name:t.name,duration:t.duration,focus:t.focus,exercises:t.exercises}}}),D();return}const r={};u.forEach(t=>{r[t.key]={name:t.name,duration:t.duration,focus:t.focus,exercises:t.exercises}}),S({...g,workoutsByDay:r}),D()},[v,f]=d.useState(n?0:null);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:`bg-background rounded-2xl w-full ${n?"max-w-2xl":"max-w-5xl"} mx-auto h-full md:h-auto flex flex-col overflow-hidden border border-border`,style:{maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("span",{className:"font-bold text-xl text-primary font-space-grotesk",children:s(n?`workouts.days.${n}`:"workouts.weeklyPlanning.title")}),e.jsx("button",{"aria-label":s("common.cancel"),onClick:D,className:"p-2 rounded-full hover:bg-muted/40 transition",children:e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x text-muted-foreground",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 px-4 py-4 md:px-8 md:py-6",children:[!n&&e.jsx("div",{className:"text-muted-foreground mb-4 text-base text-center font-space-grotesk",children:s("workouts.weeklyPlanning.description")}),e.jsx("div",{className:"flex flex-col gap-6",children:u.map((r,t)=>e.jsxs("div",{className:"flex flex-col w-full",children:[n?null:e.jsxs("button",{className:`flex items-center justify-between px-4 py-3 rounded-xl bg-muted/10 w-full text-left focus:outline-none transition ${v===t?"ring-2 ring-primary":""}`,onClick:()=>f(v===t?null:t),children:[e.jsx("span",{className:"font-semibold text-base text-primary",children:s(`workouts.days.${r.key}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),P(t,"up")},disabled:t===0,children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),P(t,"down")},disabled:t===u.length-1,children:e.jsx(me,{className:"w-4 h-4"})}),v===t?e.jsx(le,{className:"ml-2 w-5 h-5 text-muted-foreground"}):e.jsx(te,{className:"ml-2 w-5 h-5 text-muted-foreground"})]})]}),(n||v===t)&&e.jsxs("div",{className:"bg-card rounded-xl p-6 flex flex-col gap-4 mt-2 border border-border/50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.nameLabel","Session name")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:r.name,onChange:a=>k(t,"name",a.target.value),placeholder:s(`workouts.${r.key}.name`,"Nom du jour"),disabled:!!n})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.focusLabel","Focus")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:r.focus,onChange:a=>k(t,"focus",a.target.value),placeholder:s(`workouts.${r.key}.focus`,"Focus du jour")})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.durationLabel","Duration (min)")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",type:"number",value:r.duration||"",onChange:a=>k(t,"duration",a.target.value),placeholder:s("workouts.minutes","Dur√©e")})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2 text-lg",children:s("workouts.exercises","Exercices")}),e.jsx("div",{className:"flex flex-col gap-3",children:r.exercises.map((a,l)=>e.jsxs("div",{className:"flex flex-row gap-3 items-center bg-muted/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:s("workouts.exerciseNameLabel","Nom de l'exercice")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:a.name,onChange:c=>x(t,l,"name",c.target.value),placeholder:s("workouts.exerciseNameLabel","Nom de l'exercice")})]}),e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:s("workouts.repsLabel","R√©p√©titions")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:a.reps,onChange:c=>x(t,l,"reps",c.target.value),placeholder:s("workouts.repsLabel","R√©p√©titions")})]}),e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:s("workouts.modificationLabel","Modification")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:a.modification,onChange:c=>x(t,l,"modification",c.target.value),placeholder:s("workouts.modificationLabel","Modification")})]}),e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:s("workouts.tipsLabel","Conseils")}),e.jsx("input",{className:"w-full rounded-lg border border-border bg-background px-4 py-2 text-base text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary transition",value:a.tips,onChange:c=>x(t,l,"tips",c.target.value),placeholder:s("workouts.tipsLabel","Conseils")})]}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>$(t,l),"aria-label":s("common.delete","Supprimer"),children:[" ",e.jsx(ce,{className:"w-4 h-4 text-red-500"})," "]})]},l))}),e.jsxs(p,{variant:"outline",size:"sm",className:"mt-2 w-full",onClick:()=>L(t),children:[e.jsx(pe,{className:"w-4 h-4 mr-1"})," ",s("workouts.addExerciseButton","Ajouter un exercice")]})]})]})]},r.key))})]}),e.jsx("div",{className:"sticky bottom-0 bg-card border-t px-4 py-3 flex gap-2 justify-end",children:e.jsx(p,{variant:"default",onClick:N,children:s("common.save")})})]})})},ve=()=>{const[D,n]=d.useState(!1),[s,g]=d.useState(!1),[S,b]=d.useState(null),{t:i}=X(),{data:u,setData:y}=Z(),P=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],L=P.map(o=>({key:o,label:i(`workouts.days.${o}`)})),$=u.workoutsByDay,[x,k]=d.useState(P[new Date().getDay()-1]||"monday"),N=$[x];d.useState(!1),d.useState(0),d.useState([]),d.useState(0),d.useState(!1),d.useRef(null);const v=ae(),{user:f}=ie(),[r,t]=d.useState([]),[a,l]=d.useState(u.weeklyProgress.workoutsTarget||3),[c,I]=d.useState(u.weeklyProgress.workoutsCompleted||0),[U,F]=d.useState(!1),[H,J]=d.useState(String(u.weeklyProgress.workoutsTarget||3)),{loading:O,error:B,run:ee}=oe(async()=>{if(!f)return;const{data:o}=await z.from("preferences").select("weekly_goal").eq("user_id",f.id).maybeSingle();o!=null&&o.weekly_goal&&l(o.weekly_goal);const{data:h}=await z.from("workout_sessions").select("started_at, finished_at, duration_min, completed").eq("user_id",f.id).order("started_at",{ascending:!1}).limit(5);t((h||[]).map(q=>({name:i("workouts.session"),date:new Date(q.started_at).toLocaleDateString(),duration:q.duration_min||0,completed:!!q.completed})));const m=new Date,C=m.getDay(),w=(C===0?-6:1)-C,j=new Date(m.getFullYear(),m.getMonth(),m.getDate()+w),{count:se}=await z.from("workout_sessions").select("*",{count:"exact",head:!0}).eq("user_id",f.id).eq("completed",!0).gte("started_at",j.toISOString());I(se||0)},{deps:[f==null?void 0:f.id]});return O?e.jsx(de,{}):B?e.jsx(ne,{title:i("common.error","Error"),message:String((B==null?void 0:B.message)||B),retryLabel:i("common.retry","Retry"),onRetry:ee}):e.jsxs(ue,{title:i("workouts.title"),className:"space-y-8 min-w-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-space-grotesk",children:i("workouts.title")}),e.jsx("p",{className:"text-muted-foreground",children:i("workouts.subtitle")})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 snap-x stagger-children",children:L.map(({key:o,label:h})=>e.jsx(p,{variant:x===o?"default":"outline",size:"sm",className:"min-w-[100px] snap-start transition-colors",onClick:()=>k(o),children:h},o))}),e.jsxs(E,{variant:"tint",children:[e.jsxs(M,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-6 w-6 text-primary"}),e.jsxs(R,{size:"xl",children:[i(`workouts.${x}.name`)," ",i("workouts.session")]})]})}),e.jsx(_,{className:"text-base",children:i(`workouts.${x}.focus`,N.focus)})]}),e.jsxs(W,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-primary",children:i(`workouts.${x}.name`,N.name)}),e.jsxs("span",{className:"text-muted-foreground",children:[N.duration," ",i("workouts.minutes")]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(p,{className:"w-full btn-primary-premium",onClick:()=>v("/exercise",{state:{workout:N,selectedDay:x}}),children:i("workouts.startSession")})})]})]}),e.jsxs(E,{variant:"subtle",children:[e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-6 w-6 text-primary"}),e.jsx(R,{size:"xl",children:i("workouts.weeklyPlanning.title")})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>g(!0),"aria-label":i("workouts.weeklyPlanning.editFullPlan","Edit full plan"),children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," ",i("workouts.weeklyPlanning.editButton")]})})]}),e.jsx(_,{className:"text-base mt-2 max-w-2xl",children:i("workouts.weeklyPlanning.description")})]}),e.jsx(W,{className:"pt-2 pb-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L.map(({key:o,label:h})=>{const m=$[o],C=x===o,w=!m;return e.jsxs("button",{type:"button",onClick:()=>k(o),onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),k(o))},"aria-pressed":C,"aria-label":i("workouts.weeklyPlanning.dayAriaLabel",{defaultValue:`${h} ‚Äì ${w?i("workouts.restDay","Rest Day"):i(`workouts.${o}.name`,m.name)}`}),className:["group relative text-left rounded-lg border p-3 flex flex-col gap-1 w-full overflow-hidden transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 focus-visible:ring-offset-background",C?"border-primary/60 bg-primary/5 shadow-sm":"border-border bg-background hover:bg-muted/40","min-h-[132px]"].join(" "),style:{wordBreak:"break-word"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-0.5",children:[e.jsx("span",{className:"font-semibold text-sm text-primary leading-tight truncate pr-2",children:h}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-muted/50 text-muted-foreground uppercase tracking-wide",children:w?i("workouts.rest","Rest"):i("workouts.sessionShort","Session")})]}),e.jsx("div",{className:"font-medium text-sm text-foreground truncate",children:w?i("workouts.restDay","Rest Day"):i(`workouts.${o}.name`,m.name)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[!w&&e.jsx(G,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:w?i("workouts.noDuration","-"):`${m.duration} ${i("workouts.minShort","min")}`})]}),e.jsx("div",{className:"text-[11px] italic text-muted-foreground truncate",children:!w&&i(`workouts.${o}.focus`,m.focus)}),e.jsx("div",{className:"mt-auto pt-1 flex justify-end",children:e.jsxs(p,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:j=>{j.stopPropagation(),b(o)},"aria-label":i("workouts.weeklyPlanning.editDayButton"),children:[e.jsx(V,{className:"h-3.5 w-3.5 mr-1"})," ",i("common.edit","Edit")]})}),C&&e.jsx("span",{className:"pointer-events-none absolute inset-0 ring-2 ring-primary/40 rounded-lg","aria-hidden":"true"})]},o)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{variant:"subtle",children:[e.jsxs(M,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),e.jsx(R,{size:"base",children:i("workouts.recentSessions")})]}),r.length>0&&e.jsx(T,{variant:"outline",className:"text-[10px] font-normal px-2 py-0.5",children:r.length})]}),e.jsx(_,{className:"text-xs",children:i("workouts.recentSessionsDescription")})]}),e.jsx(W,{className:"pt-0 space-y-3",children:r.length>0?e.jsx("div",{className:"space-y-2 stagger-children",children:r.map((o,h)=>{const m=o.duration?Math.min(100,Math.round(o.duration/60*100)):0;return e.jsxs("div",{className:"group rounded-md border border-border/40 p-3 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:o.name}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.duration," ",i("workouts.minutes")]}),o.completed&&e.jsx(T,{variant:"secondary",className:"text-[10px] bg-green-500/15 text-green-600",children:i("workouts.completed")})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:o.date}),o.duration>0&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[m,"%"]})]}),o.duration>0&&e.jsx(Q,{value:m,className:"h-1 mt-2"})]},h)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:i("workouts.noRecentSessions")})})]}),e.jsxs(E,{variant:"subtle",children:[e.jsxs(M,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),e.jsx(R,{size:"base",children:i("workouts.weeklyGoal")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",className:"text-[10px] font-normal px-2 py-0.5",children:a||0}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{F(o=>!o),J(String(a))},children:U?i("common.cancel","Cancel"):i("common.edit","Edit")})]})]}),e.jsx(_,{className:"text-xs",children:i("workouts.weeklyGoalDescription")})]}),e.jsxs(W,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold leading-none text-primary","aria-label":`${c} / ${a}`,children:c}),e.jsx("div",{className:"mt-1 text-xs text-muted-foreground uppercase tracking-wide",children:i("workouts.completedThisWeek")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:i("workouts.weeklyGoal")}),e.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[e.jsx("span",{className:"text-lg font-semibold",children:c}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",a]})]}),e.jsxs(T,{variant:"secondary",className:"mt-2 text-[10px]",children:[Math.min(100,a?Math.round(c/a*100):0),"%"]})]})]}),e.jsx(Q,{value:Math.min(100,a?Math.round(c/a*100):0),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.max(0,a-c)," ",i("workouts.moreSessions")," ",i("workouts.toReachGoal")]}),U&&e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx(re,{type:"number",min:1,max:14,value:H,onChange:o=>J(o.target.value),className:"w-24 h-8"}),e.jsx(p,{size:"sm",onClick:async()=>{const o=Math.max(1,Math.min(14,Number(H)||1));l(o),f&&await z.from("preferences").upsert({user_id:f.id,weekly_goal:o}),F(!1)},children:i("common.save","Save")})]})]})]})]})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-2xl w-full",onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"text-lg font-bold mb-2",children:i("exerciseBuilder.title","Cr√©er un exercice")}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(p,{variant:"outline",onClick:()=>n(!1),children:i("common.cancel","Cancel")})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>g(!1),children:e.jsx("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-2xl w-full",onClick:o=>o.stopPropagation(),children:e.jsx(Y,{onClose:()=>g(!1)})})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>b(null),children:e.jsx("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-lg w-full",onClick:o=>o.stopPropagation(),children:e.jsx(Y,{day:S,onClose:()=>b(null)})})})]})};export{ve as default};
