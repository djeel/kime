import{g as F,b as I,u as O,r as l,j as e,B as f,X as te,h as re,i as ae,a as ie,s as L,C as T,c as W,d as q,f as A,e as G,I as oe}from"./index-BfZ5KBQI.js";import{u as ne,B as U}from"./useAsync-CdrnrLkJ.js";import{P as K}from"./progress-CH9e0ym1.js";import{E as ce}from"./ErrorState-CpDg7nxZ.js";import{S as le,C as de,T as me}from"./trash-2-B24cPI8D.js";import{W as ue}from"./PageSkeletons-D1zAlwxf.js";import{P as xe}from"./PageContainer-Rz-u_6WB.js";import{T as X,C as Q}from"./target-C6opFIO2.js";import{P as Y}from"./pencil-DUeMrmkB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=F("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=F("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=F("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Z=({onClose:S,day:c})=>{const{t:s}=I(),{data:w,setData:$}=O(),P=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];P.map(a=>({key:a,label:s(`workouts.days.${a}`)}));const i=w.workoutsByDay||{monday:{name:s("workouts.monday.name"),duration:25,exercises:[{name:s("exercise.pushUps.description"),reps:"10-15",modification:s("exercise.pushUps.modification"),tips:s("exercise.pushUps.tips")},{name:s("exercise.plankHold.description"),reps:"30s",modification:s("exercise.plankHold.modification"),tips:s("exercise.plankHold.tips")},{name:s("exercise.tricepDips.description"),reps:"10",modification:s("exercise.tricepDips.modification"),tips:s("exercise.tricepDips.tips")}]},tuesday:{name:s("workouts.tuesday.name"),duration:20,exercises:[{name:s("exercise.deadBug.description"),reps:"12",modification:s("exercise.deadBug.modification"),tips:s("exercise.deadBug.tips")},{name:s("exercise.sidePlank.description"),reps:"20s each side",modification:s("exercise.sidePlank.modification"),tips:s("exercise.sidePlank.tips")},{name:s("exercise.mountainClimbers.description"),reps:"20",modification:s("exercise.mountainClimbers.modification"),tips:s("exercise.mountainClimbers.tips")}]},wednesday:{name:s("workouts.wednesday.name"),duration:30,exercises:[{name:s("exercise.squats.description"),reps:"15",modification:s("exercise.squats.modification"),tips:s("exercise.squats.tips")},{name:s("exercise.reverseLunges.description"),reps:"10 each leg",modification:s("exercise.reverseLunges.modification"),tips:s("exercise.reverseLunges.tips")},{name:s("exercise.gluteBridge.description"),reps:"15",modification:s("exercise.gluteBridge.modification"),tips:s("exercise.gluteBridge.tips")}]},thursday:{name:s("workouts.thursday.name"),duration:15,exercises:[{name:s("exercise.catCow.description"),reps:"10",modification:s("exercise.catCow.modification"),tips:s("exercise.catCow.tips")},{name:s("exercise.worldsGreatestStretch.description"),reps:"6 each side",modification:s("exercise.worldsGreatestStretch.modification"),tips:s("exercise.worldsGreatestStretch.tips")},{name:s("exercise.childsPose.description"),reps:"30s",modification:s("exercise.childsPose.modification"),tips:s("exercise.childsPose.tips")}]},friday:{name:s("workouts.friday.name"),duration:25,exercises:[{name:s("exercise.jumpingJacks.description"),reps:"30",modification:s("exercise.jumpingJacks.modification"),tips:s("exercise.jumpingJacks.tips")},{name:s("exercise.pushUps.description"),reps:"10",modification:s("exercise.pushUps.modification"),tips:s("exercise.pushUps.tips")},{name:s("exercise.squats.description"),reps:"15",modification:s("exercise.squats.modification"),tips:s("exercise.squats.tips")}]},saturday:{name:s("workouts.saturday.name"),duration:20,exercises:[{name:s("exercise.walking.description"),reps:"10 min",modification:s("exercise.walking.modification"),tips:s("exercise.walking.tips")},{name:s("exercise.standingQuadStretch.description"),reps:"30s each leg",modification:s("exercise.standingQuadStretch.modification"),tips:s("exercise.standingQuadStretch.tips")},{name:s("exercise.neckRolls.description"),reps:"10",modification:s("exercise.neckRolls.modification"),tips:s("exercise.neckRolls.tips")}]},sunday:{name:s("workouts.sunday.name"),duration:10,exercises:[{name:s("exercise.breathingPractice.description"),reps:"5 min",modification:s("exercise.breathingPractice.modification"),tips:s("exercise.breathingPractice.tips")},{name:s("exercise.bodyScan.description"),reps:"5 min",modification:s("exercise.bodyScan.modification"),tips:s("exercise.bodyScan.tips")}]}},[d,k]=l.useState(()=>{var a;return c?[{key:c,...i[c],exercises:(((a=i[c])==null?void 0:a.exercises)||[]).map(t=>({...t}))}]:P.map(t=>{var r;return{key:t,...i[t],exercises:(((r=i[t])==null?void 0:r.exercises)||[]).map(n=>({...n}))}})}),E=(a,t)=>{if(c)return;const r=[...d];t==="up"&&a>0&&([r[a-1],r[a]]=[r[a],r[a-1]]),t==="down"&&a<r.length-1&&([r[a],r[a+1]]=[r[a+1],r[a]]),k(r)},R=a=>{const t=[...d],r=t[a];r.rest=!r.rest,r.rest?(r._backupExercises=r.exercises,r.exercises=[],r.duration=0):(r.exercises=r._backupExercises||[],delete r._backupExercises),k(t)},_=a=>{const t=[...d],r=t[a].exercises[t[a].exercises.length-1];r&&!r.name&&!r.reps&&!r.modification&&!r.tips||(t[a].exercises.push({name:"",reps:"",modification:"",tips:""}),k(t))},g=(a,t)=>{const r=[...d];r[a].exercises.splice(t,1),k(r)},j=(a,t,r,n)=>{const m=[...d];m[a].exercises[t][r]=n,k(m)},y=(a,t,r)=>{const n=[...d];t==="duration"?n[a][t]=r===""?"":Number(r):n[a][t]=r,k(n)},H=()=>{if(c){const t=d[0];$({...w,workoutsByDay:{...w.workoutsByDay,[c]:{name:t.name,duration:t.duration,focus:t.focus,exercises:t.rest?[]:t.exercises}}}),S();return}const a={};d.forEach(t=>{a[t.key]={name:t.name,duration:t.duration,focus:t.focus,exercises:t.rest?[]:t.exercises}}),$({...w,workoutsByDay:a}),S()},[u,B]=l.useState(c?0:null),[h,x]=l.useState(null),M=(a,t)=>r=>{x({dayIdx:a,exIdx:t}),r.dataTransfer.effectAllowed="move"},b=(a,t)=>r=>{if(r.preventDefault(),!h||h.dayIdx!==a||h.exIdx===t)return;const n=[...d],m=n[a].exercises.slice(),[N]=m.splice(h.exIdx,1);m.splice(t,0,N),n[a].exercises=m,k(n),x({dayIdx:a,exIdx:t})},V=()=>x(null);return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 md:p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:S}),e.jsxs("div",{className:`relative bg-card rounded-xl shadow-lg w-full ${c?"max-w-2xl":"max-w-5xl"} mx-auto flex flex-col overflow-hidden border border-border/60 animate-in`,style:{maxHeight:"92vh"},role:"dialog","aria-modal":"true","aria-label":s(c?`workouts.days.${c}`:"workouts.weeklyPlanning.title"),children:[e.jsxs("div",{className:"sticky top-0 bg-card/95 backdrop-blur-sm border-b px-5 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-lg font-space-grotesk tracking-tight",children:s(c?`workouts.days.${c}`:"workouts.weeklyPlanning.title")}),c&&e.jsx("span",{className:"text-xs text-muted-foreground",children:s("workouts.editDaySubtitle","Adjust this session")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:S,className:"gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),s("common.cancel")]}),e.jsxs(f,{size:"sm",onClick:H,className:"gap-1",children:[e.jsx(le,{className:"w-4 h-4"}),s("common.save")]})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1 px-4 py-4 md:px-8 md:py-6 space-y-6",children:e.jsx("div",{className:"flex flex-col gap-5",children:d.map((a,t)=>e.jsxs("div",{className:"flex flex-col w-full",children:[c?null:e.jsxs("button",{className:`flex items-center justify-between px-4 py-3 rounded-lg w-full text-left focus:outline-none transition-colors border ${u===t?"bg-muted/40 border-border":"bg-muted/10 border-transparent hover:bg-muted/20"}`,onClick:()=>B(u===t?null:t),children:[e.jsxs("span",{className:"font-semibold text-base text-primary flex items-center gap-2",children:[s(`workouts.days.${a.key}`),e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:a.rest?s("workouts.restDay","Rest Day"):`${a.exercises.length} ex • ${a.duration||0}m`})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:r=>{r.stopPropagation(),E(t,"up")},disabled:t===0,children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(f,{variant:"ghost",size:"icon",onClick:r=>{r.stopPropagation(),E(t,"down")},disabled:t===d.length-1,children:e.jsx(pe,{className:"w-4 h-4"})}),u===t?e.jsx(de,{className:"ml-1 w-5 h-5 text-muted-foreground"}):e.jsx(re,{className:"ml-1 w-5 h-5 text-muted-foreground"})]})]}),(c||u===t)&&e.jsxs("div",{className:"bg-background/60 rounded-xl p-5 flex flex-col gap-5 mt-3 border border-border/60",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:grid md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.nameLabel","Session name")}),e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40 transition",value:a.name,onChange:r=>y(t,"name",r.target.value),placeholder:s(`workouts.${a.key}.name`,"Nom du jour"),disabled:!!c})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.focusLabel","Focus")}),e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40 transition",value:a.focus,onChange:r=>y(t,"focus",r.target.value),placeholder:s(`workouts.${a.key}.focus`,"Focus du jour")})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s("workouts.durationLabel","Duration (min)")}),e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40 transition",type:"number",value:a.duration||"",onChange:r=>y(t,"duration",r.target.value),placeholder:s("workouts.minutes","Durée")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>R(t),className:`text-xs px-2.5 py-1 rounded-full border transition ${a.rest?"bg-muted/60 border-border text-muted-foreground":"bg-primary/10 border-primary/30 text-primary"}`,children:a.rest?s("workouts.toggleRestOff","Rest day"):s("workouts.toggleRestOn","Active day")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.rest?s("workouts.restDayDescription","This day will be a recovery / rest day."):s("workouts.activeDayDescription","Configure exercises below.")})]}),e.jsx("div",{children:!a.rest&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold mb-2 text-sm tracking-wide uppercase text-muted-foreground/80",children:s("workouts.exercises","Exercices")}),e.jsx("div",{className:"flex flex-col gap-3",children:a.exercises.map((r,n)=>e.jsxs("div",{className:`flex flex-col md:flex-row gap-3 bg-muted/10 rounded-md p-3 pl-8 border border-border/40 group relative ${h&&h.dayIdx===t&&h.exIdx===n?"opacity-70 ring-1 ring-primary/50":""}`,draggable:!0,onDragStart:M(t,n),onDragOver:b(t,n),onDragEnd:V,children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground/60 group-hover:text-foreground transition cursor-grab active:cursor-grabbing select-none","aria-hidden":"true",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 flex-1",children:[e.jsx("div",{className:"flex flex-col gap-1 min-w-0",children:e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40",value:r.name,onChange:m=>j(t,n,"name",m.target.value),placeholder:s("workouts.exerciseNameLabel","Nom de l'exercice")})}),e.jsx("div",{className:"flex flex-col gap-1 min-w-0",children:e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40",value:r.reps,onChange:m=>j(t,n,"reps",m.target.value),placeholder:s("workouts.repsLabel","Répétitions")})}),e.jsx("div",{className:"flex flex-col gap-1 min-w-0",children:e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40",value:r.modification,onChange:m=>j(t,n,"modification",m.target.value),placeholder:s("workouts.modificationLabel","Modification")})}),e.jsx("div",{className:"flex flex-col gap-1 min-w-0",children:e.jsx("input",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/40",value:r.tips,onChange:m=>j(t,n,"tips",m.target.value),placeholder:s("workouts.tipsLabel","Conseils")})})]}),e.jsx("div",{className:"flex items-center gap-1 self-start md:self-stretch md:flex-col",children:e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>g(t,n),"aria-label":s("common.delete","Supprimer"),className:"hover:bg-red-500/10",children:e.jsx(me,{className:"w-4 h-4 text-red-500"})})})]},n))}),e.jsxs(f,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>_(t),children:[e.jsx(he,{className:"w-4 h-4 mr-1"})," ",s("workouts.addExerciseButton","Ajouter un exercice")]})]})})]})]},a.key))})})]})]})},Se=()=>{const[S,c]=l.useState(!1),[s,w]=l.useState(!1),[$,P]=l.useState(null),{t:i}=I(),{data:d,setData:k}=O(),E=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],R=E.map(o=>({key:o,label:i(`workouts.days.${o}`)})),_=d.workoutsByDay,[g,j]=l.useState(E[new Date().getDay()-1]||"monday"),y=_[g];l.useState(!1),l.useState(0),l.useState([]),l.useState(0),l.useState(!1),l.useRef(null);const H=ae(),{user:u}=ie(),[B,h]=l.useState([]),[x,M]=l.useState(d.weeklyProgress.workoutsTarget||3),[b,V]=l.useState(d.weeklyProgress.workoutsCompleted||0),[a,t]=l.useState(!1),[r,n]=l.useState(String(d.weeklyProgress.workoutsTarget||3)),{loading:m,error:N,run:ee}=ne(async()=>{if(!u)return;const{data:o}=await L.from("preferences").select("weekly_goal").eq("user_id",u.id).maybeSingle();o!=null&&o.weekly_goal&&M(o.weekly_goal);const{data:v}=await L.from("workout_sessions").select("started_at, finished_at, duration_min, completed").eq("user_id",u.id).order("started_at",{ascending:!1}).limit(5);h((v||[]).map(J=>({name:i("workouts.session"),date:new Date(J.started_at).toLocaleDateString(),duration:J.duration_min||0,completed:!!J.completed})));const p=new Date,z=p.getDay(),D=(z===0?-6:1)-z,C=new Date(p.getFullYear(),p.getMonth(),p.getDate()+D),{count:se}=await L.from("workout_sessions").select("*",{count:"exact",head:!0}).eq("user_id",u.id).eq("completed",!0).gte("started_at",C.toISOString());V(se||0)},{deps:[u==null?void 0:u.id]});return m?e.jsx(ue,{}):N?e.jsx(ce,{title:i("common.error","Error"),message:String((N==null?void 0:N.message)||N),retryLabel:i("common.retry","Retry"),onRetry:ee}):e.jsxs(xe,{title:i("workouts.title"),className:"space-y-8 min-w-0 overflow-x-hidden stagger-children",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-space-grotesk",children:i("workouts.title")}),e.jsx("p",{className:"text-muted-foreground",children:i("workouts.subtitle")})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 snap-x stagger-children",children:R.map(({key:o,label:v})=>e.jsx(f,{variant:g===o?"default":"outline",size:"sm",className:"min-w-[100px] snap-start transition-colors ring-0 focus:ring-0 focus-visible:ring-0 focus:outline-none focus-visible:outline-none focus:ring-offset-0 focus-visible:ring-offset-0",onClick:()=>j(o),children:v},o))}),e.jsxs(T,{variant:"tint",children:[e.jsxs(W,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-6 w-6 text-primary"}),e.jsxs(q,{size:"xl",children:[i(`workouts.${g}.name`)," ",i("workouts.session")]})]})}),e.jsx(A,{className:"text-base",children:i(`workouts.${g}.focus`,y.focus)})]}),e.jsxs(G,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-primary",children:i(`workouts.${g}.name`,y.name)}),e.jsxs("span",{className:"text-muted-foreground",children:[y.duration," ",i("workouts.minutes")]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(f,{className:"w-full btn-primary-premium",onClick:()=>H("/exercise",{state:{workout:y,selectedDay:g}}),children:i("workouts.startSession")})})]})]}),e.jsxs(T,{variant:"subtle",children:[e.jsxs(W,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-6 w-6 text-primary"}),e.jsx(q,{size:"xl",children:i("workouts.weeklyPlanning.title")})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>w(!0),"aria-label":i("workouts.weeklyPlanning.editFullPlan","Edit full plan"),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"})," ",i("workouts.weeklyPlanning.editButton")]})})]}),e.jsx(A,{className:"text-base mt-2 max-w-2xl",children:i("workouts.weeklyPlanning.description")})]}),e.jsx(G,{className:"pt-2 pb-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:R.map(({key:o,label:v})=>{const p=_[o],z=g===o,D=!p;return e.jsxs("button",{type:"button",onClick:()=>j(o),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),j(o))},"aria-pressed":z,"aria-label":i("workouts.weeklyPlanning.dayAriaLabel",{defaultValue:`${v} – ${D?i("workouts.restDay","Rest Day"):i(`workouts.${o}.name`,p.name)}`}),className:["group relative text-left rounded-lg border p-3 flex flex-col gap-1 w-full overflow-hidden transition-colors duration-150","focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0",z?"border-border bg-primary/5 shadow-sm":"border-border bg-background hover:bg-muted/40 active:bg-muted/50","min-h-[132px]"].join(" "),style:{wordBreak:"break-word"},children:[e.jsx("div",{className:"flex items-start justify-between mb-0.5",children:e.jsx("span",{className:"font-semibold text-sm text-primary leading-tight truncate pr-2",children:v})}),e.jsx("div",{className:"font-medium text-sm text-foreground truncate",children:D?i("workouts.restDay","Rest Day"):i(`workouts.${o}.name`,p.name)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[!D&&e.jsx(Q,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:D?i("workouts.noDuration","-"):`${p.duration} ${i("workouts.minShort","min")}`})]}),e.jsx("div",{className:"text-[11px] italic text-muted-foreground truncate",children:!D&&i(`workouts.${o}.focus`,p.focus)}),e.jsx("div",{className:"mt-auto pt-1 flex justify-end",children:e.jsxs(f,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:C=>{C.stopPropagation(),P(o)},"aria-label":i("workouts.weeklyPlanning.editDayButton"),children:[e.jsx(Y,{className:"h-3.5 w-3.5 mr-1"})," ",i("common.edit","Edit")]})})]},o)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{variant:"subtle",children:[e.jsxs(W,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),e.jsx(q,{size:"base",children:i("workouts.recentSessions")})]}),B.length>0&&e.jsx(U,{variant:"outline",className:"text-[10px] font-normal px-2 py-0.5",children:B.length})]}),e.jsx(A,{className:"text-xs",children:i("workouts.recentSessionsDescription")})]}),e.jsx(G,{className:"pt-0 space-y-3",children:B.length>0?e.jsx("div",{className:"space-y-2 stagger-children",children:B.map((o,v)=>{const p=o.duration?Math.min(100,Math.round(o.duration/60*100)):0;return e.jsxs("div",{className:"group rounded-md border border-border/40 p-3 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:o.name}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.duration," ",i("workouts.minutes")]}),o.completed&&e.jsx(U,{variant:"secondary",className:"text-[10px] bg-green-500/15 text-green-600",children:i("workouts.completed")})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:o.date}),o.duration>0&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[p,"%"]})]}),o.duration>0&&e.jsx(K,{value:p,className:"h-1 mt-2"})]},v)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:i("workouts.noRecentSessions")})})]}),e.jsxs(T,{variant:"subtle",children:[e.jsxs(W,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-primary"}),e.jsx(q,{size:"base",children:i("workouts.weeklyGoal")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:"outline",className:"text-[10px] font-normal px-2 py-0.5",children:x||0}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{t(o=>!o),n(String(x))},children:a?i("common.cancel","Cancel"):i("common.edit","Edit")})]})]}),e.jsx(A,{className:"text-xs",children:i("workouts.weeklyGoalDescription")})]}),e.jsxs(G,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold leading-none text-primary","aria-label":`${b} / ${x}`,children:b}),e.jsx("div",{className:"mt-1 text-xs text-muted-foreground uppercase tracking-wide",children:i("workouts.completedThisWeek")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:i("workouts.weeklyGoal")}),e.jsxs("div",{className:"mt-1 flex items-baseline justify-end gap-1",children:[e.jsx("span",{className:"text-lg font-semibold",children:b}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",x]})]}),e.jsxs(U,{variant:"secondary",className:"mt-2 text-[10px]",children:[Math.min(100,x?Math.round(b/x*100):0),"%"]})]})]}),e.jsx(K,{value:Math.min(100,x?Math.round(b/x*100):0),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.max(0,x-b)," ",i("workouts.moreSessions")," ",i("workouts.toReachGoal")]}),a&&e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx(oe,{type:"number",min:1,max:14,value:r,onChange:o=>n(o.target.value),className:"w-24 h-8"}),e.jsx(f,{size:"sm",onClick:async()=>{const o=Math.max(1,Math.min(14,Number(r)||1));M(o),u&&await L.from("preferences").upsert({user_id:u.id,weekly_goal:o}),t(!1)},children:i("common.save","Save")})]})]})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>c(!1),children:e.jsxs("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-2xl w-full",onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"text-lg font-bold mb-2",children:i("exerciseBuilder.title","Créer un exercice")}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(f,{variant:"outline",onClick:()=>c(!1),children:i("common.cancel","Cancel")})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>w(!1),children:e.jsx("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-2xl w-full",onClick:o=>o.stopPropagation(),children:e.jsx(Z,{onClose:()=>w(!1)})})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",onClick:()=>P(null),children:e.jsx("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-lg w-full",onClick:o=>o.stopPropagation(),children:e.jsx(Z,{day:$,onClose:()=>P(null)})})})]})};export{Se as default};
